addPolygons(
data = ASP_registros,
fillColor = ~ colores_especies(ASP_registros$especies),
fillOpacity = 0.7,
stroke = TRUE,
color = "black",
weight = 1,
popup = paste(
paste(
"<strong>Provincia:</strong>",
ASP_registros$nombre_ASP
),
paste(
"<strong>Cantidad de especies:</strong>",
ASP_registros$especies
),
sep = '<br/>'
),
group = "Provincias - especies"
) %>%
addLayersControl(baseGroups = c("OSM"),
overlayGroups = c("Provincias - especies")) %>%
addLegend(
position = "bottomleft",
pal = colores_especies,
values = ASP_registros$especies,
group = "Provincias - especies",
title = "Cantidad de orquideas")
# Paleta de colores
colores_especies <-
colorNumeric(palette = "Purples",
domain = ASP_registros$especies,
na.color = "transparent")
leaflet() %>%
addTiles(group = "OSM") %>%
addPolygons(
data = ASP_registros,
fillColor = ~ colores_especies(ASP_registros$especies),
fillOpacity = 0.7,
stroke = TRUE,
color = "black",
weight = 1,
popup = paste(
paste(
"<strong>Provincia:</strong>",
ASP_registros$nombre_ASP
),
paste(
"<strong>Cantidad de especies:</strong>",
ASP_registros$especies
),
sep = '<br/>'
),
group = "Provincias - especies"
) %>%
addLayersControl(baseGroups = c("OSM"),
overlayGroups = c("Provincias - especies")) %>%
addLegend(
position = "bottomleft",
pal = colores_especies,
values = ASP_registros$especies,
group = "Provincias - especies",
title = "Cantidad de orquideas")
# Paleta de colores
colores_registros <-
colorNumeric(palette = "Grays",
domain = ASP_registros$especies,
na.color = "transparent")
# Paleta de colores
colores_especies <-
colorNumeric(palette = "Purples",
domain = ASP_registros$especies,
na.color = "transparent")
leaflet() %>%
addTiles(group = "OSM") %>%
addPolygons(
data = ASP_registros,
fillColor = ~ colores_especies(ASP_registros$especies),
fillOpacity = 0.7,
stroke = TRUE,
color = "black",
weight = 1,
popup = paste(
paste(
"<strong>Provincia:</strong>",
ASP_registros$nombre_asp
),
paste(
"<strong>Cantidad de especies:</strong>",
ASP_registros$especies
),
sep = '<br/>'
),
group = "Provincias - especies"
) %>%
addLayersControl(baseGroups = c("OSM"),
overlayGroups = c("Provincias - especies")) %>%
addLegend(
position = "bottomleft",
pal = colores_especies,
values = ASP_registros$especies,
group = "Provincias - especies",
title = "Cantidad de orquideas")
# Paleta de colores
colores_ASP_registros <-
colorNumeric(palette = "Grays",
domain = ASP_registros$especies,
na.color = "transparent")
# Paleta de colores
colores_especies <-
colorNumeric(palette = "Purples",
domain = ASP_registros$especies,
na.color = "transparent")
leaflet() %>%
addTiles(group = "OSM") %>%
addPolygons(
data = ASP_registros,
fillColor = ~ colores_especies(ASP_registros$especies),
fillOpacity = 0.7,
stroke = TRUE,
color = "black",
weight = 1,
popup = paste(
paste(
"<strong>Provincia:</strong>",
ASP_registros$nombre_asp
),
paste(
"<strong>Cantidad de especies:</strong>",
ASP_registros$especies
),
sep = '<br/>'
),
group = "Provincias - especies"
) %>%
addLayersControl(baseGroups = c("OSM"),
overlayGroups = c("Provincias - especies")) %>%
addLegend(
position = "bottomleft",
pal = colores_especies,
values = ASP_registros$especies,
group = "Provincias - especies",
title = "Cantidad de orquideas")
leaflet() %>%
addTiles(group = "OSM") %>%
addPolygons(
data = ASP_registros,
fillColor = ~ colores_especies(ASP_registros$especies),
fillOpacity = 0.7,
stroke = TRUE,
color = "black",
weight = 1,
popup = paste(
paste(
"<strong>Provincia:</strong>",
ASP_registros$nombre_asp
),
paste(
"<strong>Cantidad de especies:</strong>",
ASP_registros$especies
),
sep = '<br/>'
),
group = "Provincias - especies"
) %>%
addLayersControl(baseGroups = c("OSM"),
overlayGroups = c("Especies")) %>%
addLegend(
position = "bottomleft",
pal = colores_especies,
values = ASP_registros$especies,
group = "Especies",
title = "Cantidad de orquideas")
leaflet() %>%
addTiles(group = "OSM") %>%
addPolygons(
data = ASP_registros,
fillColor = ~ colores_especies(ASP_registros$especies),
fillOpacity = 0.7,
stroke = TRUE,
color = "black",
weight = 1,
popup = paste(
paste(
"<strong>Distrito:</strong>",
ASP_registros$nombre_asp
),
paste(
"<strong>Cantidad de especies:</strong>",
ASP_registros$especies
),
sep = '<br/>'
),
group = "Distrito - especies"
) %>%
addLayersControl(baseGroups = c("OSM"),
overlayGroups = c("Especies")) %>%
addLegend(
position = "bottomleft",
pal = colores_especies,
values = ASP_registros$especies,
group = "Especies",
title = "Cantidad de orquideas")
leaflet() %>%
addTiles(group = "OSM") %>%
addPolygons(
data = ASP_registros,
fillColor = ~ colores_especies(ASP_registros$especies),
fillOpacity = 0.7,
stroke = TRUE,
color = "black",
weight = 1,
popup = paste(
paste(
"<strong>Área silvestre protegida:</strong>",
ASP_registros$nombre_asp
),
paste(
"<strong>Cantidad de especies:</strong>",
ASP_registros$especies
),
sep = '<br/>'
),
group = "Área silvestre protegida - especies"
) %>%
addLayersControl(baseGroups = c("OSM"),
overlayGroups = c("Especies")) %>%
addLegend(
position = "bottomleft",
pal = colores_especies,
values = ASP_registros$especies,
group = "Especies",
title = "Cantidad de orquideas")
leaflet() %>%
addTiles(group = "OSM") %>%
addPolygons(
data = ASP_registros,
fillColor = ~ colores_especies(ASP_registros$especies),
fillOpacity = 0.7,
stroke = TRUE,
color = "black",
weight = 1,
popup = paste(
paste(
"<strong>Área silvestre protegida:</strong>",
ASP_registros$nombre_asp
),
paste(
"<strong>Cantidad de especies de orquídeas:</strong>",
ASP_registros$especies
),
sep = '<br/>'
),
group = "Área silvestre protegida - Especies de orquídeas"
) %>%
addLayersControl(baseGroups = c("OSM"),
overlayGroups = c("Especies de Orquídeas")) %>%
addLegend(
position = "bottomleft",
pal = colores_especies,
values = ASP_registros$especies,
group = "Especies",
title = "Cantidad de orquideas")
# Paleta de colores
colores_especies <-
colorNumeric(palette = "Reds",
domain = ASP_registros$especies,
na.color = "transparent")
# Paleta de colores
colores_ASP_registros <-
colorNumeric(palette = "Grays",
domain = ASP_registros$especies,
na.color = "transparent")
leaflet() %>%
addTiles(group = "OSM") %>%
addPolygons(
data = ASP_registros,
fillColor = ~ colores_especies(ASP_registros$especies),
fillOpacity = 0.7,
stroke = TRUE,
color = "black",
weight = 1,
popup = paste(
paste(
"<strong>Área silvestre protegida:</strong>",
ASP_registros$nombre_asp
),
paste(
"<strong>Cantidad de especies de orquídeas:</strong>",
ASP_registros$especies
),
sep = '<br/>'
),
group = "Área silvestre protegida - Especies de orquídeas"
) %>%
addLayersControl(baseGroups = c("OSM"),
overlayGroups = c("Especies de Orquídeas")) %>%
addLegend(
position = "bottomleft",
pal = colores_especies,
values = ASP_registros$especies,
group = "Especies",
title = "Cantidad de orquídeas")
leaflet() %>%
addTiles(group = "OSM") %>%
addPolygons(
data = ASP_registros,
fillColor = ~ colores_especies(ASP_registros$especies),
fillOpacity = 0.7,
stroke = TRUE,
color = "black",
weight = 1,
popup = paste(
paste(
"<strong>Área silvestre protegida:</strong>",
ASP_registros$nombre_asp
),
paste(
"<strong>Cantidad de especies de orquídeas:</strong>",
ASP_registros$especies
),
sep = '<br/>'
),
group = "Área silvestre protegida - Especies de orquídeas"
) %>%
addLayersControl(baseGroups = c("OSM"),
overlayGroups = c("ASP_registros")) %>%
addLegend(
position = "bottomleft",
pal = colores_especies,
values = ASP_registros$especies,
group = "Especies",
title = "Cantidad de orquídeas")
leaflet() %>%
addTiles(group = "OSM") %>%
addPolygons(
data = ASP_registros,
fillColor = ~ colores_especies(ASP_registros$especies),
fillOpacity = 0.7,
stroke = TRUE,
color = "black",
weight = 1,
popup = paste(
paste(
"<strong>Área silvestre protegida:</strong>",
ASP_registros$nombre_asp
),
paste(
"<strong>Cantidad de especies de orquídeas:</strong>",
ASP_registros$especies
),
sep = '<br/>'
),
group = "Área silvestre protegida - Especies de orquídeas"
) %>%
addLayersControl(baseGroups = c("OSM"),
overlayGroups = c("Área silvestre protegida - Especies de Orquídeas")) %>%
addLegend(
position = "bottomleft",
pal = colores_especies,
values = ASP_registros$especies,
group = "Área silvestre protegida - Especies de orquideas",
title = "Cantidad de orquídeas")
ASP_registros <-
ASP %>%
st_join(Orquideas) %>%
group_by(nombre_ASP) %>%
summarize(especies = n_distinct(species,na.rm = TRUE))
ASP_registros <-
ASP %>%
st_join(Orquideas) %>%
group_by(nombre_asp) %>%
summarize(especies = n_distinct(species,na.rm = TRUE))
library(sf)
library(leaflet)
library(leaflet.extras)
library(leafem)
library(dplyr)
library(DT)
library(plotly)
library(raster)
library(tidyr)
library(spData)
# Carga de los datos de las orquideas de Costa Rica
Orquideas <-
st_read(
"https://raw.githubusercontent.com/gf0604-procesamientodatosgeograficos/2021i-datos/main/gbif/orchidaceae-cr-registros.csv",
options = c(
"X_POSSIBLE_NAMES=decimalLongitude",
"Y_POSSIBLE_NAMES=decimalLatitude"
),
quiet = TRUE
)
# Carga de los datos de areas silvestres protegidas (ASP) de Costa Rica
ASP <-
st_read(
"https://raw.githubusercontent.com/gf0604-procesamientodatosgeograficos/2021i-datos/main/sinac/asp/asp-wgs84.geojson",
quiet = TRUE
)
#Asignación del sistema de las coordenadas
st_crs(Orquideas) = 4326
st_crs(ASP) = 4326
Orquideas <- Orquideas %>%
filter(!is.na(coordinateUncertaintyInMeters) & coordinateUncertaintyInMeters <= 1000)%>%
filter(species!="Orquideas")
cat("Cantidad de registros después de descartar los valores mayores a mil", nrow(ASP))
# Descartar los campos vacíos de species contenidos en los datos de las orquideas
Orquideas$species[Orquideas$species == " "] <- "Orquideas"
# Descartar los registros de las ASP que son Áreas marinas protegidas
ASP <-
ASP %>%
filter(descripcio!="Area Marina de Manejo" & descripcio!="Area marina protegida")
cat("Cantidad de registros después de descartar las areas marinas protegidas", nrow(ASP))
ASP_registros <-
ASP %>%
st_join(Orquideas) %>%
group_by(nombre_ASP) %>%
summarize(especies = n_distinct(species,na.rm = TRUE))
ASP_registros <-
ASP %>%
st_join(Orquideas) %>%
group_by(nombre_asp) %>%
summarize(especies = n_distinct(species,na.rm = TRUE))
View(ASP_registros)
ASP_registros <-
asp %>%
st_join(Orquideas) %>%
group_by(nombre_asp) %>%
summarize(especies = n_distinct(species,na.rm = TRUE))
# Descartar los campos vacíos de species contenidos en los datos de las orquideas
Orquideas$species[Orquideas$species == ""] <- "Orquideas"
# Descartar los registros de las ASP que son Áreas marinas protegidas
ASP <-
ASP %>%
filter(descripcio!="Area Marina de Manejo" & descripcio!="Area marina protegida")
cat("Cantidad de registros después de descartar las areas marinas protegidas", nrow(ASP))
ASP_registros <-
ASP %>%
st_join(Orquideas) %>%
group_by(nombre_asp) %>%
summarize(especies = n_distinct(species,na.rm = TRUE))
View(ASP_registros)
leaflet() %>%
addTiles(group = "OSM") %>%
addPolygons(
data = ASP_registros,
fillColor = ~ colores_ASP_registros(ASP_registros$especies),
fillOpacity = 0.7,
stroke = TRUE,
color = "black",
weight = 1,
popup = paste(
paste(
"<strong>Área silvestre protegida:</strong>",
ASP_registros$nombre_asp
),
paste(
"<strong>Cantidad de especies de orquídeas:</strong>",
ASP_registros$especies
),
sep = '<br/>'
),
group = "Área silvestre protegida - Especies de orquídeas"
) %>%
addLayersControl(baseGroups = c("OSM"),
overlayGroups = c("Área silvestre protegida - Especies de Orquídeas")) %>%
addLegend(
position = "bottomleft",
pal = colores_especies,
values = ASP_registros$especies,
group = "Área silvestre protegida - Especies de orquideas",
title = "Cantidad de orquídeas")
# Paleta de colores
colores_ASP_registros <-
colorNumeric(palette = "Grays",
domain = ASP_registros$especies,
na.color = "transparent")
# Paleta de colores
colores_especies <-
colorNumeric(palette = "Reds",
domain = ASP_registros$especies,
na.color = "transparent")
leaflet() %>%
addTiles(group = "OSM") %>%
addPolygons(
data = ASP_registros,
fillColor = ~ colores_ASP_registros(ASP_registros$especies),
fillOpacity = 0.7,
stroke = TRUE,
color = "black",
weight = 1,
popup = paste(
paste(
"<strong>Área silvestre protegida:</strong>",
ASP_registros$nombre_asp
),
paste(
"<strong>Cantidad de especies de orquídeas:</strong>",
ASP_registros$especies
),
sep = '<br/>'
),
group = "Área silvestre protegida - Especies de orquídeas"
) %>%
addLayersControl(baseGroups = c("OSM"),
overlayGroups = c("Área silvestre protegida - Especies de Orquídeas")) %>%
addLegend(
position = "bottomleft",
pal = colores_especies,
values = ASP_registros$especies,
group = "Área silvestre protegida - Especies de orquideas",
title = "Cantidad de orquídeas")
